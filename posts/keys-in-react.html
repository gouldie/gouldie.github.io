<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Full-Stack Web Developer Portfolio, React/Node.js specialist</title><meta name="robots" content="follow, index"/><meta content="I’m a full-stack software engineer specialising in React/Node and I create interactive user experiences on the web." name="description"/><meta property="og:url" content="https://gouldie.github.io/posts/keys-in-react"/><link rel="canonical" href="https://gouldie.github.io/posts/keys-in-react"/><meta property="og:type" content="website"/><meta property="og:site_name" content="Matthew Gould"/><meta property="og:description" content="I’m a full-stack software engineer specialising in React/Node and I create interactive user experiences on the web."/><meta property="og:title" content="Full-Stack Web Developer Portfolio, React/Node.js specialist"/><meta property="og:image" content="/og.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@gouldieweb"/><meta name="twitter:title" content="Full-Stack Web Developer Portfolio, React/Node.js specialist"/><meta name="twitter:description" content="I’m a full-stack software engineer specialising in React/Node and I create interactive user experiences on the web."/><meta name="twitter:image" content="/og.png"/><meta name="next-head-count" content="17"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#445384"/><meta name="msapplication-TileColor" content="#2b5797"/><meta name="theme-color" content="#ffffff"/><link rel="preload" href="/_next/static/css/0fdc62b288931773.css" as="style"/><link rel="stylesheet" href="/_next/static/css/0fdc62b288931773.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-8fa1640cc84ba8fe.js" defer=""></script><script src="/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/_next/static/chunks/main-f11614d8aa7ee555.js" defer=""></script><script src="/_next/static/chunks/pages/_app-de184b0330393448.js" defer=""></script><script src="/_next/static/chunks/pages/posts/keys-in-react-a3d35230dfa0a402.js" defer=""></script><script src="/_next/static/07OmtoCN5_MbplQ-V_Nr5/_buildManifest.js" defer=""></script><script src="/_next/static/07OmtoCN5_MbplQ-V_Nr5/_ssgManifest.js" defer=""></script></head><body><div id="__next"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><header class="my-container pt-8 pb-16"><nav class="border-gray-200 px-2 sm:px-4 py-2.5 rounded"><div class="flex flex-wrap justify-between items-center mx-auto"><a href="/"><div class="w-20 h-8"></div></a><div class="md:hidden flex items-center"><button data-collapse-toggle="mobile-menu-4" type="button" class="inline-flex items-center ml-5 p-2 text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-4" aria-expanded="false"><span class="sr-only">Open main menu</span><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg><svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><div class="hidden justify-between items-center w-full md:flex md:w-auto" id="mobile-menu-4"><div class="flex flex-col mt-6 md:mt-4 md:flex-row md:space-x-8 md:mt-0 md:font-medium"><a href="/"><span class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 md:dark:hover:text-white dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700">Home</span></a><a href="/projects"><span class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 md:dark:hover:text-white dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700">Projects</span></a><a href="/posts"><span class="block py-2 pr-4 pl-3 text-white bg-blue-700 rounded md:bg-transparent md:text-blue-700 md:p-0 dark:text-white">Posts</span></a><a href="/contact"><span class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 md:dark:hover:text-white dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700">Contact</span></a></div></div><div class="hidden md:block"></div></div></nav></header><main id="skip" class="my-container pb-8"><div class="mb-6"><a href="/posts">← Back to posts</a></div><h1 class="text-4xl mb-2">React - Keys</h1>
<h2 class="text-lightsubtitle dark:text-darksubtitle mb-12">Why using an index is sometimes not enough</h2>
<h1 class="text-2xl mt-10 mb-6 font-semibold">Keys - what actually are they?</h1>
<p class="mb-6">When rendering a list, it is best practice to provide a key attribute to each list item to help
React uniquely identify it. This allows React to keep track of each list item and ensures that,
between each render, the internal state of each list item is preserved.</p>
<p class="mb-6">Fail to provide a key and React will give you a warning. Many code-analysis tools such as ESLint
will also show a warning. Without a key, React will default to using indexes.</p>
<p class="mb-6">Typically, a unique ID from your data set should be used. Developers will often use an index for
convenience as it is provided by the <code>map</code> function.</p>
<h1 class="text-2xl mt-10 mb-6 font-semibold">Why using an index is sometimes not enough</h1>
<p class="mb-6">So, you&#x27;ve provided the index as a key. Warnings have disappeared. What could go wrong?</p>
<p class="mb-6">Here is a simple stock management app. It displays a list of products and the number of stock
available for each one. It has two main features:</p>
<ul>
<li class="list-disc">The user can update the stock for a particular product</li>
<li class="list-disc">The user can shuffle the order of the products</li>
</ul>
<figure class="text-center pt-4 pb-6"><img class="inline max-w-[90%]" src="/images/keys-1.png" alt="Stock management app" style="width:100px"/><figcaption class="text-xs pt-2">Image: <!-- -->Stock management app</figcaption></figure>
<p class="mb-6">Product data is initialised in memory. In a more realistic scenario, this would come from a
database.</p>
<figure class="text-center pt-4 pb-6"><img class="inline max-w-[90%]" src="/images/keys-2.png" alt="Initial product data" style="width:200px"/><figcaption class="text-xs pt-2">Image: <!-- -->Initial product data</figcaption></figure>
<p class="mb-6">Parent component iterates through the products, rendering a child component for each one. Each child
has its own local state for updating the stock number. Also note that each child is given the index
as its key.</p>
<figure class="text-center pt-4 pb-6"><img class="inline max-w-[90%]" src="/images/keys-3.png" alt="React code that renders the products" style="width:600px"/><figcaption class="text-xs pt-2">Image: <!-- -->React code that renders the products</figcaption></figure>
<p class="mb-6">If we were to shuffle the list, a product could end up in a different position and thus be given a
different key.</p>
<p class="mb-6">Keys no longer uniquely identify a product. React can no longer uniquely identify each product.
State becomes corrupt.</p>
<figure class="text-center pt-4 pb-6"><img class="inline max-w-[90%]" src="/images/keys-4.gif" alt="State becoming corrupt with indexes as keys" style="width:100px"/><figcaption class="text-xs pt-2">Image: <!-- -->State becoming corrupt with indexes as keys</figcaption></figure>
<h1 class="text-2xl mt-10 mb-6 font-semibold">So what&#x27;s the solution?</h1>
<p class="mb-6">Ensure each item has unique identifier. If it&#x27;s a database resource, it may already have a unique id
you can use.</p>
<figure class="text-center pt-4 pb-6"><img class="inline max-w-[90%]" src="/images/keys-5.png" alt="Giving each product a unique id" style="width:200px"/><figcaption class="text-xs pt-2">Image: <!-- -->Giving each product a unique id</figcaption></figure>
<p class="mb-6">Use the unique identifier as the key rather than the index.</p>
<figure class="text-center pt-4 pb-6"><img class="inline max-w-[90%]" src="/images/keys-6.png" alt="Passing the unique id as a key into each list item" style="width:600px"/><figcaption class="text-xs pt-2">Image: <!-- -->Passing the unique id as a key into each list item</figcaption></figure>
<p class="mb-6">Finally, React should now be able to track each list item correctly.</p>
<figure class="text-center pt-4 pb-6"><img class="inline max-w-[90%]" src="/images/keys-7.gif" alt="Correct state using ids as keys" style="width:100px"/><figcaption class="text-xs pt-2">Image: <!-- -->Correct state using ids as keys</figcaption></figure>
<p class="mb-6">tl;dr - only use indexes as keys if you are sure the list order and length will not change. If in
doubt, use a unique identifier.</p></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/posts/keys-in-react","query":{},"buildId":"07OmtoCN5_MbplQ-V_Nr5","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>